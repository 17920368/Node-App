<%- include("template/head", {tituloWeb: "Detalle"}) %>

<body>
  <form action="" id="editar" data-id="<%= mascota.id %>">
    <input type="text" class="form-control my-5" value="<%= mascota._id %>" name="id">
    <input type="text" class="form-control my-5" value="<%= mascota.nombre %>" name="nombre">
    <input type="text" class="form-control my-3" value="<%= mascota.descripcion %>" name="descripcion">
    <button type="submit" class="btn btn-success">Editar</button>
  </form>
  <button class="btn btn-warning" id="btn-eliminar" data-id="<%= mascota._id %>">Eliminar</button>
</body>

</html>
<script>
  const btnEliminar = document.querySelector("#btn-eliminar");
  btnEliminar.addEventListener("click", async () => {
    console.log("click");
    const id = btnEliminar.dataset.id;
    try {
      const data = await fetch(`/mascotas/${id}`, {
        method: 'delete'
      });
      const res = await data.json();
      if (res.estado) {
        window.location.href = "/mascotas";
      } else {
        console.log(res)
      }
      console.log(res);
    } catch (error) {
      console.log(error);
    }
  });
</script>